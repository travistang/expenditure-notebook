(this["webpackJsonpexpenditure-notebook"]=this["webpackJsonpexpenditure-notebook"]||[]).push([[0],{21:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(16),o=n.n(c),i=(n(21),n(3)),s=n(5),l=n(6),u=n(0);function d(e){var t=e.value,n=e.onChange,r=a.a.useRef(null),c="".concat((t/100).toFixed(2),"\u20ac"),o=window.screen.width;return Object(u.jsx)("input",{ref:r,style:{fontSize:1.5*o/c.length},className:"digit center text-color-100 bg-primary-500 text-center",value:c,type:"tel",onKeyDown:function(e){var r=e.key,a=parseInt(r);Number.isNaN(a)||n(10*t+a),"Backspace"===r&&n(Math.floor(t/10))}})}var b,j=n(4),p=n(7);function x(e){var t=e.currentPage,n=e.goPage,r=t===b.HOME_PAGE?b.RECORD_LIST_PAGE:b.HOME_PAGE,a=r===b.HOME_PAGE?j.a:j.b;return Object(u.jsxs)("header",{className:"h-16 center relative",children:[Object(u.jsx)("span",{className:"uppercase text-lg",children:"Expenditure logbook"}),Object(u.jsx)("div",{className:"absolute right-0 top-0 h-full horizontal-center gap-4 text-xl",children:Object(u.jsx)(p.a,{icon:a,onClick:function(){return n(r)},className:"cursor-pointer"})})]})}!function(e){e[e.HOME_PAGE=0]="HOME_PAGE",e[e.RECORD_LIST_PAGE=1]="RECORD_LIST_PAGE"}(b||(b={}));n(28);var m=n(12),O=n.n(m);function h(e){var t=e.children,n=e.className,r=e.name,a=e.label,c=e.value,o=e.onChange;return Object(u.jsxs)("div",{className:"vertical gap-1",children:[Object(u.jsx)("label",{htmlFor:r,children:a}),Object(u.jsxs)("div",{className:O()("rounded-lg bg-primary-200 p-4 horizontal",n),children:[t,Object(u.jsx)("input",{className:"bg-primary-200 w-full outline-none text-2xl",value:c,onChange:function(e){return o(e.target.value)}})]})]})}function f(e){var t=e.onSubmit;return Object(u.jsx)("div",{className:"h-1/6 md:h-1/3 center w-full",children:Object(u.jsx)("button",{onClick:t,className:"h-20 w-20 md:h-96 md:w-96 rounded-full bg-secondary-500 text-xl md:text-7xl",children:Object(u.jsx)(p.a,{icon:j.c})})})}function v(e){var t=e.text,n=e.onDelete;return Object(u.jsxs)("div",{onClick:n,className:"horizontal-center px-2 py-1 rounded-md bg-primary-100 text-sm text-color-100",children:[Object(u.jsx)("span",{className:"pr-1",children:t}),Object(u.jsx)(p.a,{icon:j.d,className:"pl-1 w-8 h-8"})]})}function g(e){var t=e.name,n=e.label,r=e.values,c=e.onChange,o=e.selectableOptions,i=void 0===o?[]:o,d=a.a.useState(""),b=Object(l.a)(d,2),j=b[0],p=b[1],x=function(e){var t=e||j;t&&(r.find((function(e){return e.toLowerCase()===t.toLowerCase()}))||(c([].concat(Object(s.a)(r),[t])),p("")))},m=function(e){return function(){c(r.filter((function(t){return t!==e})))}},h=j.length<2?[]:i.filter((function(e){return e.toLowerCase().includes(j.toLowerCase())&&!r.find((function(t){return t.toLowerCase()===e.toLowerCase()}))})).sort().slice(0,5);return Object(u.jsxs)("div",{className:"vertical gap-1",children:[Object(u.jsx)("label",{htmlFor:t,children:n}),Object(u.jsxs)("div",{className:O()("relative rounded-lg bg-primary-200 p-4 horizontal","gap-2"),children:[r.map((function(e){return Object(u.jsx)(v,{text:e,onDelete:m(e)},e)})),Object(u.jsx)("input",{onKeyDown:function(e){"Enter"===e.key&&x(),"Backspace"===e.key&&0===j.length&&r.length>0&&m(r[r.length-1])()},className:"bg-primary-200 w-full outline-none text-2xl",value:j,onChange:function(e){return p(e.target.value)}}),h&&Object(u.jsx)("div",{className:"absolute min-h-20 bg-primary-200 rounded-lg left-0 right-0 top-full mt-2 overflow-y-scroll",children:h.map((function(e){return Object(u.jsx)("div",{onClick:function(){return x(e)},className:"cursor-pointer px-2 h-12 whitespace-nowrap overflow-ellipsis horizontal-center hover:bg-primary-700",children:e},e)}))})]})]})}var w={expenditures:[]},N="ls/expenditure",E=a.a.createContext({store:w,addExpenditure:function(e){}});function y(e){var t=e.children,n=function(e){try{var t=JSON.parse(localStorage.getItem(N)||"")||w;return e?e.split(".").reduce((function(e,t){return null===e||void 0===e?void 0:e[t]}),t):t}catch(n){return null}}()||{expenditures:[]},r=a.a.useState(n),c=Object(l.a)(r,2),o=c[0],d=c[1];a.a.useEffect((function(){var e;o&&(e=o,localStorage.setItem(N,JSON.stringify(e)))}),[o]);var b={store:o,addExpenditure:function(e){d(Object(i.a)(Object(i.a)({},o),{},{expenditures:[].concat(Object(s.a)(o.expenditures),[e])}))}};return Object(u.jsx)(E.Provider,{value:b,children:t})}var C=n(13),S=n(31);function P(){var e,t=a.a.useContext(E).store;return Object(u.jsx)("div",{className:"vertical",children:null===t||void 0===t||null===(e=t.expenditures)||void 0===e?void 0:e.map((function(e){return Object(u.jsxs)("div",{className:"items-center grid grid-cols-12 h-16 border-t border-b border-primary-200",children:[Object(u.jsx)("span",{className:"col-span-3",children:Object(S.a)(new Date(e.date),"yyyy-MM-dd HH:mm")}),Object(u.jsx)("span",{className:"col-span-6 whitespace-nowrap overflow-hidden overflow-ellipsis",children:e.description}),Object(u.jsxs)("span",{className:"col-span-3 whitespace-nowrap overflow-hidden overflow-ellipsis",children:[e.amount,"\u20ac"]})]})}))})}var _={amount:0,description:"",labels:[]};function k(){var e=a.a.useState(b.HOME_PAGE),t=Object(l.a)(e,2),n=t[0],r=t[1],c=a.a.useContext(E),o=c.addExpenditure,j=c.store,p=a.a.useState(_),m=Object(l.a)(p,2),O=m[0],v=m[1],w=j.expenditures.reduce((function(e,t){return Array.from(new Set([].concat(Object(s.a)(e),Object(s.a)(t.labels))))}),[]);return Object(u.jsxs)("div",{className:"absolute vertical inset-0 flex p-4 bg-primary-500",children:[Object(u.jsx)(C.a,{}),Object(u.jsx)(x,{currentPage:n,goPage:r}),n===b.HOME_PAGE&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d,{value:O.amount,onChange:function(e){return v(Object(i.a)(Object(i.a)({},O),{},{amount:e}))}}),Object(u.jsx)(h,{name:"description",label:"description",value:O.description,onChange:function(e){return v(Object(i.a)(Object(i.a)({},O),{},{description:e}))}}),Object(u.jsx)(g,{name:"labels",label:"tags",values:O.labels,onChange:function(e){return v(Object(i.a)(Object(i.a)({},O),{},{labels:e}))},selectableOptions:w}),Object(u.jsx)("div",{className:"flex-1"}),Object(u.jsx)(f,{onSubmit:function(){O.amount<=0||!O.description?C.b.error("missing description or amount is invalid."):(o(Object(i.a)(Object(i.a)({},O),{},{amount:O.amount/100,date:new Date,id:"".concat((new Date).getTime(),"-").concat(Math.random().toString().split(".")[1])})),v(_),C.b.success("Expenditure logged!"))}})]}),n===b.RECORD_LIST_PAGE&&Object(u.jsx)(P,{})]})}function A(){return Object(u.jsx)(y,{children:Object(u.jsx)(k,{})})}var D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root")),D()}},[[29,1,2]]]);
//# sourceMappingURL=main.dbf34ed0.chunk.js.map