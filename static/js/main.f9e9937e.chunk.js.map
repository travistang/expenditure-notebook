{"version":3,"sources":["components/AmountInput.tsx","pageList.ts","components/Header.tsx","components/Input.tsx","components/SubmitButton.tsx","components/MultipleSelect/SelectedOptionChip.tsx","components/MultipleSelect/index.tsx","backend/types.ts","backend/ls.ts","contexts/LocalStorageContext.tsx","pages/RecordListPage.tsx","components/Modal.tsx","components/UploadModal.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["AmountInput","value","onChange","inputRef","React","useRef","valueString","toFixed","screenWidth","window","screen","width","ref","style","fontSize","length","className","type","onKeyDown","e","key","keyAsDigit","parseInt","Number","isNaN","Math","floor","PageList","Header","currentPage","goPage","goingPage","HOME_PAGE","RECORD_LIST_PAGE","goingPageIcon","faHome","faList","icon","onClick","Input","children","name","label","htmlFor","classnames","target","SubmitButton","onOpenUploadModal","onSubmit","faPen","faQrcode","SelectedOptionChip","text","onDelete","faTimes","MultipleSelect","values","selectableOptions","useState","editingValue","setEditingValue","onAddOption","selectedOption","finalAddingOption","find","opt","toLowerCase","onRemove","option","filter","displayingSelectableOptions","includes","sort","slice","map","DEFAULT_DB_VALUE","expenditures","LS_STORAGE_KEY","LocalStorageContext","createContext","store","addExpenditure","_","LocalStorageContextProvider","db","data","JSON","parse","localStorage","getItem","split","reduce","result","keyPart","getData","setStore","useEffect","setItem","stringify","contextValue","expenditure","Provider","RecordListPage","useContext","record","format","Date","date","description","amount","Modal","title","opened","onClose","stopPropagation","UploadModal","onQRDetected","a","decodedData","url","Error","fetch","method","body","response","json","toast","success","error","location","hostname","onError","message","onScan","defaultFormValue","labels","App","page","setPage","formValue","setFormValue","uploadFormModalOpened","setUploadFormOpened","labelsAddedInStore","Array","from","Set","newValue","desc","id","getTime","random","toString","AppWithContexts","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f9e9937e.chunk.js","sourcesContent":["import React, { KeyboardEventHandler } from \"react\";\n\ntype Props = {\n  value: number;\n  onChange: (value: number) => void;\n};\nexport default function AmountInput({ value, onChange }: Props) {\n  const inputRef = React.useRef(null);\n\n  const valueString = `${(value / 100).toFixed(2)}€`;\n\n  const screenWidth = window.screen.width;\n  const onInput: KeyboardEventHandler = (e) => {\n    const key = e.key;\n    const keyAsDigit = parseInt(key);\n    if (!Number.isNaN(keyAsDigit)) {\n      onChange(value * 10 + keyAsDigit);\n    }\n\n    if (key === \"Backspace\") {\n      onChange(Math.floor(value / 10));\n    }\n  };\n  return (\n    <input\n      ref={inputRef}\n      style={{ fontSize: (1.5 * screenWidth) / valueString.length }}\n      className=\"digit center text-color-100 bg-primary-500 text-center\"\n      value={valueString}\n      type=\"tel\"\n      onKeyDown={onInput}\n    ></input>\n  );\n}\n","export enum PageList {\n  HOME_PAGE,\n  RECORD_LIST_PAGE,\n}\n","import { faHome, faList } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport { PageList } from \"../pageList\";\n\ntype Props = {\n  currentPage: PageList;\n  goPage: (page: PageList) => void;\n};\nexport default function Header({ currentPage, goPage }: Props) {\n  const goingPage =\n    currentPage === PageList.HOME_PAGE\n      ? PageList.RECORD_LIST_PAGE\n      : PageList.HOME_PAGE;\n  const goingPageIcon = goingPage === PageList.HOME_PAGE ? faHome : faList;\n  const go = () => goPage(goingPage);\n  return (\n    <header className=\"h-16 flex-0 center relative\">\n      <span className=\"uppercase text-lg\">Expenditure logbook</span>\n      <div className=\"absolute right-0 top-0 h-full horizontal-center gap-4 text-xl\">\n        <FontAwesomeIcon\n          icon={goingPageIcon}\n          onClick={go}\n          className=\"cursor-pointer\"\n        />\n      </div>\n    </header>\n  );\n}\n","import classnames from \"classnames\";\n\ntype Props = {\n  children?: React.ReactNode;\n  value: string;\n  name: string;\n  label: string;\n  className?: string;\n  onChange: (value: string) => void;\n};\nexport default function Input({\n  children,\n  className,\n  name,\n  label,\n  value,\n  onChange,\n}: Props) {\n  return (\n    <div className=\"vertical gap-1\">\n      <label htmlFor={name}>{label}</label>\n      <div\n        className={classnames(\n          \"rounded-lg bg-primary-200 p-4 horizontal\",\n          className\n        )}\n      >\n        {children}\n        <input\n          className=\"bg-primary-200 w-full outline-none text-2xl\"\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPen, faQrcode } from \"@fortawesome/free-solid-svg-icons\";\n\ntype Props = {\n  onSubmit: () => void;\n  onOpenUploadModal: () => void;\n};\nexport default function SubmitButton({ onOpenUploadModal, onSubmit }: Props) {\n  return (\n    <div className=\"h-1/6 md:h-1/3 center w-full relative\">\n      <button\n        onClick={onSubmit}\n        className=\"h-20 w-20 md:h-96 md:w-96 rounded-full bg-secondary-500 text-xl md:text-7xl\"\n      >\n        <FontAwesomeIcon icon={faPen} />\n      </button>\n      <div className=\"absolute right-0 top-0 h-full horizontal-center gap-2\">\n        <button\n          onClick={onOpenUploadModal}\n          className=\"text-3xl md:text-7xl rounded-full center h-12 w-12 bg-color-50 text-primary-500\"\n        >\n          <FontAwesomeIcon icon={faQrcode} className=\"text-primary-500\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import { faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\ntype Props = {\n  text: string;\n  onDelete: () => void;\n};\n\nexport default function SelectedOptionChip({ text, onDelete }: Props) {\n  return (\n    <div\n      onClick={onDelete}\n      className=\"horizontal-center px-2 py-1 rounded-md bg-primary-100 text-sm text-color-100\"\n    >\n      <span className=\"pr-1\">{text}</span>\n      <FontAwesomeIcon icon={faTimes} className=\"pl-1 w-8 h-8\" />\n    </div>\n  );\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport SelectedOptionChip from \"./SelectedOptionChip\";\n\ntype Props = {\n  values: string[];\n  name: string;\n  label: string;\n  onChange: (values: string[]) => void;\n  selectableOptions?: string[];\n};\nexport default function MultipleSelect({\n  name,\n  label,\n  values,\n  onChange,\n  selectableOptions = [],\n}: Props) {\n  const [editingValue, setEditingValue] = React.useState(\"\");\n\n  const onAddOption = (selectedOption?: string) => {\n    const finalAddingOption = selectedOption || editingValue;\n    if (!finalAddingOption) {\n      return;\n    }\n    const hasExistingOptionMatchingInput = values.find(\n      (opt) => opt.toLowerCase() === finalAddingOption.toLowerCase()\n    );\n    if (hasExistingOptionMatchingInput) {\n      return;\n    }\n    onChange([...values, finalAddingOption]);\n    setEditingValue(\"\");\n  };\n\n  const onRemove = (option: string) => () => {\n    onChange(values.filter((opt) => opt !== option));\n  };\n\n  const onKeyDown: React.KeyboardEventHandler<HTMLInputElement> = (e) => {\n    if (e.key === \"Enter\") {\n      onAddOption();\n    }\n\n    if (\n      e.key === \"Backspace\" &&\n      editingValue.length === 0 &&\n      values.length > 0\n    ) {\n      onRemove(values[values.length - 1])();\n    }\n  };\n\n  const displayingSelectableOptions =\n    editingValue.length < 2\n      ? []\n      : selectableOptions\n          .filter(\n            (opt) =>\n              opt.toLowerCase().includes(editingValue.toLowerCase()) &&\n              !values.find((value) => value.toLowerCase() === opt.toLowerCase())\n          )\n          .sort()\n          .slice(0, 5);\n  return (\n    <div className=\"vertical gap-1\">\n      <label htmlFor={name}>{label}</label>\n      <div\n        className={classnames(\n          \"relative rounded-lg bg-primary-200 p-4 horizontal\",\n          \"gap-2\"\n        )}\n      >\n        {values.map((value) => (\n          <SelectedOptionChip\n            text={value}\n            key={value}\n            onDelete={onRemove(value)}\n          />\n        ))}\n        <input\n          onKeyDown={onKeyDown}\n          className=\"bg-primary-200 w-full outline-none text-2xl\"\n          value={editingValue}\n          onChange={(e) => setEditingValue(e.target.value)}\n        />\n        {displayingSelectableOptions && (\n          <div className=\"absolute min-h-20 bg-primary-200 rounded-lg left-0 right-0 top-full mt-2 overflow-y-scroll\">\n            {displayingSelectableOptions.map((opt) => (\n              <div\n                key={opt}\n                onClick={() => onAddOption(opt)}\n                className=\"cursor-pointer px-2 h-12 whitespace-nowrap overflow-ellipsis horizontal-center hover:bg-primary-700\"\n              >\n                {opt}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","export type Expenditure = {\n  description: string;\n  date: Date;\n  amount: number;\n  labels: string[];\n  id: string;\n};\n\nexport type DB = {\n  expenditures: Expenditure[];\n};\n\nexport const DEFAULT_DB_VALUE: DB = {\n  expenditures: [],\n};\n","import { DB, DEFAULT_DB_VALUE } from \"./types\";\n\nconst LS_STORAGE_KEY = \"ls/expenditure\";\n\nexport const saveData = (data: object) => {\n  localStorage.setItem(LS_STORAGE_KEY, JSON.stringify(data));\n};\n\nexport const getData = <T>(key?: string): T | null => {\n  try {\n    const data: DB =\n      JSON.parse(localStorage.getItem(LS_STORAGE_KEY) || \"\") ||\n      DEFAULT_DB_VALUE;\n    return key\n      ? key.split(\".\").reduce<any>((result, keyPart) => result?.[keyPart], data)\n      : data;\n  } catch {\n    return null;\n  }\n};\n","import React from \"react\";\nimport { getData, saveData } from \"../backend/ls\";\nimport { DB, DEFAULT_DB_VALUE, Expenditure } from \"../backend/types\";\n\nexport type LocalStorageContextType = {\n  store: DB;\n  addExpenditure: (expenditure: Expenditure) => void;\n};\nexport const LocalStorageContext = React.createContext<LocalStorageContextType>(\n  { store: DEFAULT_DB_VALUE, addExpenditure: (_) => {} }\n);\n\ntype Props = {\n  children: React.ReactNode;\n};\nexport default function LocalStorageContextProvider({ children }: Props) {\n  const db: DB = getData() || { expenditures: [] };\n  const [store, setStore] = React.useState<DB>(db);\n\n  React.useEffect(() => {\n    if (store) {\n      saveData(store);\n    }\n  }, [store]);\n  const addExpenditure = (expenditure: Expenditure) => {\n    setStore({\n      ...store,\n      expenditures: [...store.expenditures, expenditure],\n    });\n  };\n\n  const contextValue = {\n    store,\n    addExpenditure,\n  };\n  return (\n    <LocalStorageContext.Provider value={contextValue}>\n      {children}\n    </LocalStorageContext.Provider>\n  );\n}\n","import React from \"react\";\nimport { format } from \"date-fns\";\nimport { LocalStorageContext } from \"../contexts/LocalStorageContext\";\n\nexport default function RecordListPage() {\n  const { store } = React.useContext(LocalStorageContext);\n\n  return (\n    <div className=\"vertical flex-1 overflow-y-scroll\">\n      {store?.expenditures?.map((record) => (\n        <div className=\"flex-shrink-0 items-center grid grid-cols-12 h-16 border-t border-b border-primary-200\">\n          <span className=\"col-span-3\">\n            {format(new Date(record.date), \"yyyy-MM-dd HH:mm\")}\n          </span>\n          <span className=\"col-span-6 whitespace-nowrap overflow-hidden overflow-ellipsis\">\n            {record.description}\n          </span>\n          <span className=\"col-span-3 whitespace-nowrap overflow-hidden overflow-ellipsis\">\n            {record.amount}€\n          </span>\n        </div>\n      ))}\n    </div>\n  );\n}\n","import classnames from \"classnames\";\n\nexport type ModalControlProps = {\n  opened: boolean;\n  onClose: () => void;\n};\ntype Props = ModalControlProps & {\n  title: string;\n  className?: string;\n  children: React.ReactNode;\n};\nexport default function Modal({\n  children,\n  title,\n  opened,\n  onClose,\n  className,\n}: Props) {\n  if (!opened) {\n    return null;\n  }\n  return (\n    <div\n      className=\"fixed z-10 inset-0 p-4 center bg-color-700 bg-opacity-60\"\n      onClick={onClose}\n    >\n      <div\n        onClick={(e) => e.stopPropagation()}\n        className={classnames(\n          \"rounded-lg w-full bg-primary-300 text-color-100 vertical overflow-y-scroll\",\n          className || \"h-2/3 p-2\"\n        )}\n      >\n        <span className=\"uppercase font-bold text-md text-color-100 mb-2\">\n          {title}\n        </span>\n        {children}\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport toast from \"react-hot-toast\";\nimport QrReader from \"react-qr-reader\";\nimport { LocalStorageContext } from \"../contexts/LocalStorageContext\";\nimport Modal, { ModalControlProps } from \"./Modal\";\n\ntype Props = ModalControlProps;\ntype QRCodeType = {\n  url: string;\n  key: string;\n};\nexport default function UploadModal({ opened, onClose }: Props) {\n  const { store } = React.useContext(LocalStorageContext);\n  const onQRReaderError = (error: any) => {\n    toast.error(error?.message ?? \"Error with QR code\");\n  };\n\n  const onQRDetected = async (data: any) => {\n    if (data) {\n      const decodedData = JSON.parse(data) as QRCodeType;\n      if (!decodedData?.url || !decodedData?.key) {\n        throw new Error();\n      }\n\n      try {\n        const response = await fetch(decodedData.url, {\n          method: \"POST\",\n          body: JSON.stringify(store),\n        });\n        const responseJson = await response.json();\n        toast.success(\"Code detected\");\n        onClose();\n      } catch {\n        toast.error(\"Invalid QR code\");\n      }\n    }\n  };\n  return (\n    <Modal title=\"Upload record\" opened={opened} onClose={onClose}>\n      <span className=\"text-sm font-bold text-color-300 leading-4\">\n        Upload expenditure records on this device to server by sending its QR\n        code. {window.location.hostname}\n      </span>\n      <QrReader\n        className=\"mt-4 rounded-lg w-full overflow-hidden\"\n        onError={onQRReaderError}\n        onScan={onQRDetected}\n      />\n    </Modal>\n  );\n}\n","import React from \"react\";\nimport AmountInput from \"./components/AmountInput\";\nimport Header from \"./components/Header\";\n\nimport \"./App.css\";\nimport Input from \"./components/Input\";\nimport SubmitButton from \"./components/SubmitButton\";\nimport MultipleSelect from \"./components/MultipleSelect\";\nimport LocalStorageContextProvider, {\n  LocalStorageContext,\n} from \"./contexts/LocalStorageContext\";\nimport { PageList } from \"./pageList\";\nimport toast, { Toaster } from \"react-hot-toast\";\nimport RecordListPage from \"./pages/RecordListPage\";\nimport UploadModal from \"./components/UploadModal\";\n\ntype Form = {\n  amount: number;\n  description: string;\n  labels: string[];\n};\n\nconst defaultFormValue: Form = {\n  amount: 0,\n  description: \"\",\n  labels: [],\n};\nfunction App() {\n  const [page, setPage] = React.useState<PageList>(PageList.HOME_PAGE);\n  const { addExpenditure, store } = React.useContext(LocalStorageContext);\n  const [formValue, setFormValue] = React.useState<Form>(defaultFormValue);\n  const [uploadFormModalOpened, setUploadFormOpened] = React.useState(false);\n\n  const labelsAddedInStore = store.expenditures.reduce<string[]>(\n    (labels, expenditure) =>\n      Array.from(new Set([...labels, ...expenditure.labels])),\n    []\n  );\n\n  const saveForm = () => {\n    if (formValue.amount <= 0 || !formValue.description) {\n      toast.error(\"missing description or amount is invalid.\");\n      return;\n    }\n    addExpenditure({\n      ...formValue,\n      amount: formValue.amount / 100,\n      date: new Date(),\n      id: `${new Date().getTime()}-${Math.random().toString().split(\".\")[1]}`,\n    });\n    setFormValue(defaultFormValue);\n    toast.success(\"Expenditure logged!\");\n  };\n\n  return (\n    <div className=\"absolute vertical inset-0 flex p-4 bg-primary-500 overflow-hidden\">\n      <Toaster />\n      <UploadModal\n        opened={uploadFormModalOpened}\n        onClose={() => setUploadFormOpened(false)}\n      />\n      <Header currentPage={page} goPage={setPage} />\n      {page === PageList.HOME_PAGE && (\n        <div className=\"flex-1 vertical overflow-hidden\">\n          <AmountInput\n            value={formValue.amount}\n            onChange={(newValue) =>\n              setFormValue({ ...formValue, amount: newValue })\n            }\n          />\n          <Input\n            name=\"description\"\n            label=\"description\"\n            value={formValue.description}\n            onChange={(desc) =>\n              setFormValue({ ...formValue, description: desc })\n            }\n          />\n          <MultipleSelect\n            name=\"labels\"\n            label=\"tags\"\n            values={formValue.labels}\n            onChange={(labels) => setFormValue({ ...formValue, labels })}\n            selectableOptions={labelsAddedInStore}\n          />\n          <div className=\"flex-1\" />\n          <SubmitButton\n            onOpenUploadModal={() => setUploadFormOpened(true)}\n            onSubmit={saveForm}\n          />\n        </div>\n      )}\n      {page === PageList.RECORD_LIST_PAGE && <RecordListPage />}\n    </div>\n  );\n}\n\nexport default function AppWithContexts() {\n  return (\n    <LocalStorageContextProvider>\n      <App />\n    </LocalStorageContextProvider>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}